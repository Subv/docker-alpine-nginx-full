#!/bin/bash -e

CYAN='\E[1;36m'
YELLOW='\E[1;33m'
RESET='\E[0m'

echo -e "${CYAN}Building docker multiarch: ${YELLOW}${*}${RESET}"

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "${DIR}/.."

# Buildx Builder
docker buildx create --name npm || echo
docker buildx use npm

docker buildx build \
	--platform linux/amd64,linux/arm64,linux/arm/7 \
	--progress plain \
	--pull \
	-f docker/Dockerfile \
	$@ \
	.

echo -e "${CYAN}Multiarch build completed${RESET}"
